const e=()=>{if("granted"===Notification.permission){const e=new Notification("Time's up!",{body:"Your pomodoro timer has ended."});document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&e.close()}))}},t={defaultTimerTime:{pomodoro:1200,shortBreak:300,longBreak:600},selectedTimerType:"pomodoro",font:"Kumbh Sans",accentColor:"--clr-red"},o=e=>{window.localStorage.setItem("userPreferences",JSON.stringify(e))},r=document.querySelector("#timer > button"),n=r.querySelector("#timer-button-label"),l=document.getElementById("progress-ring"),i=document.getElementById("progress-ring-wrapper"),a=document.querySelector("#timer > button > time"),c=document.querySelectorAll('input[name="timer-type"]'),s=document.getElementById("settings-dialog-toggle"),d=document.getElementById("settings-dialog"),m=d.querySelector("form"),u=document.getElementById("close-dialog"),p=new Map([["pomodoro","pomodoro"],["short-break","shortBreak"],["long-break","longBreak"]]),g=(()=>{const e=window.localStorage.getItem("userPreferences");return e?JSON.parse(e):t})();let y=!1;[...c].find((e=>p.get(e.value)===g.selectedTimerType)).checked=!0;let f=g.defaultTimerTime[g.selectedTimerType],T=null;const h=()=>{l.r.baseVal.value=.4*r.getBoundingClientRect().width,i.r.baseVal.value=.42*r.getBoundingClientRect().width;const e=l.r.baseVal.value;T=2*e*Math.PI,l.style.strokeDasharray=`${T} ${T}`,l.style.strokeDashoffset=`${T}`,l.style.strokeDashoffset=0},k=e=>{null===T&&h();const t=T-e/100*T;l.style.strokeDashoffset=t};function v(e){let t=parseInt(e/60,10).toString().padStart(2,"0"),o=parseInt(e%60,10).toString().padStart(2,"0");a.firstElementChild.innerText=t,a.lastElementChild.innerText=o}let S,B;const b=()=>{k(f/g.defaultTimerTime[g.selectedTimerType]*100),v(f),f--},E=()=>{y=!0,n.innerText="Pause",b(),S=setInterval((()=>{b()}),1e3),B=setTimeout((()=>{I(),e()}),1e3*g.defaultTimerTime[g.selectedTimerType])},I=()=>{n.innerText="Start",clearInterval(S),clearTimeout(B),f=g.defaultTimerTime[g.selectedTimerType],k(100),v(f)},q=()=>{!y&&f>0?E():y||0!==f?(y=!1,n.innerText="Resume",clearInterval(S),clearTimeout(B)):(I(),E())};r.addEventListener("click",(function(){q()})),c.forEach((e=>e.addEventListener("change",(function(e){(({target:{value:e}})=>{p.has(e)&&(g.selectedTimerType=p.get(e),o(g),I())})(e)})))),s.addEventListener("click",(function(){d.showModal()})),u.addEventListener("click",(function(){d.close()})),m.addEventListener("submit",(function(e){(e=>{const{pomodoro:t,shortBreak:r,longBreak:n,font:l,accentColor:i}=(e=>{const t=[...e.querySelectorAll('input[type="radio"][name="font"]')].find((e=>e.checked)).value,o=[...e.querySelectorAll('input[type="radio"][name="accent-color"]')].find((e=>e.checked)).value;return{pomodoro:e.querySelector("#pomodoro-time-input").value,shortBreak:e.querySelector("#pomodoro-short-break-input").value,longBreak:e.querySelector("#pomodoro-long-break-input").value,font:t,accentColor:`--clr-${o}`}})(e.target);g.defaultTimerTime={pomodoro:60*t,shortBreak:60*r,longBreak:60*n},g.font=l,g.accentColor=i,o(g),document.querySelector(":root").style.setProperty("--font",g.font),document.querySelector(":root").style.setProperty("--clr-accent",`var(${g.accentColor})`),I()})(e)})),h(),v(f),(()=>{const{pomodoro:e,shortBreak:t,longBreak:o}=g.defaultTimerTime;document.getElementById("pomodoro-time-input").value=e/60,document.getElementById("pomodoro-short-break-input").value=t/60,document.getElementById("pomodoro-long-break-input").value=o/60})(),"default"===Notification.permission&&Notification.requestPermission().then((e=>{console.log(e)}));
//# sourceMappingURL=index.e4d99d85.js.map
